---
title: The dynamic landscape of peptide function prediction
output:                                                                                                         
  html_document:
    theme: paper                                                                 
---      

<style type="text/css">
.main-container {
max-width: 1800px;
margin-left: auto;
margin-right: auto;
}
</style>


```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = FALSE)

library(DT)
library(dplyr)

dat <- readRDS("../data/curated_dat.RDS") %>% 
  filter(isPEP == TRUE & isML == TRUE) %>% 
  mutate(DOI = case_when(!is.na(publication) ~ publication,
                         !is.na(preprint) ~ preprint,
                         !is.na(thesis) ~ paste0("<a href='", thesis,"' >Thesis</a>")),
         Type = case_when(!is.na(publication) ~ "Publication",
                          !is.na(preprint) ~ "Pre-print",
                          !is.na(thesis) ~ "Thesis"),
         webserver = sapply(unlist(.[["webserver"]]), function(i) ifelse(i != FALSE, paste0("<a href='", i,"' >Web server</a>"), paste0("false"))),
         modelrepository = sapply(unlist(.[["modelrepository"]]), function(i) ifelse(i != FALSE, paste0("<a href='", i,"' >Repository</a>"), paste0("false"))),
         trainingrepository = sapply(unlist(.[["trainingrepository"]]), function(i) ifelse(i != FALSE, paste0("<a href='", i,"' >Repository</a>"), paste0("false"))))   %>% 
  select(c("name", "DOI", "Type", "reproducibility", "webserver", "webserveractive", "webserverfunctional", "modelrepository", "trainingrepository",
           "antiangiogenic", "antibacterial", "antibiofilm", "anticancer", "antifungal", "antihypertensive", "antiinflammatory",
           "antimicrobial", "antiparasitic", "antiviral", "blood-brain barrier", "cell-penetrating", "chemotactic", "neuropeptides",
           "quorum sensing", "surface-binding", "toxic")) %>% 
  setNames(c("Name", "DOI", "Type", "Reproducibility standard", "Web server", "Web server activity", "Web server functionality", "Model repository", 
             "Training repository", "Antiangiogenic", "Antibacterial", "Antibiofilm", "Anticancer", "Antifungal", "Antihypertensive", 
             "Antiinflammatory", "Antimicrobial", "Antiparasitic", "Antiviral", "Blood-brain barrier", "Cell-penetrating", "Chemotactic", 
             "Neuropeptides", "Quorum sensing", "Surface-binding", "Toxic")) 

hover_text <- c("Name of a software or author if software do not have name",
                "DOI for publications and pre-prints or link for thesis",
                "Type of the article describing given software (Publication, Pre-print or Thesis)",
                "Reproducibility standard according to Heil et al. 2021. We are additionally using the category below bronze, when a model does not fulfill criteria even for the bronze category.",
                "Link to the web server",
                "Indication if a web server is active, i.e. link provided in the publication is working",
                "Indication if a web server is functional, i.e. provides understandable output after running prediction",
                "Link to the model, i.e. a repository with a trained model which can be used for prediction or an address of the model implemented as standalone software",
                "Link to the repository with all the code and data necessary to train/retrain the model",
                "Indication if the model predicts antiangiogenic activity of peptides",
                "Indication if the model predicts antibacterial activity of peptides",
                "Indication if the model predicts antibiofilm activity of peptides",
                "Indication if the model predicts anticancer activity of peptides",
                "Indication if the model predicts antifungal activity of peptides",
                "Indication if the model predicts antihypertensive activity of peptides",
                "Indication if the model predicts antiinflammatory activity of peptides",
                "Indication if the model predicts antimicrobial activity of peptides",
                "Indication if the model predicts antiparasitic activity of peptides",
                "Indication if the model predicts antiviral activity of peptides",
                "Indication if the model predicts peptides crossing blood-brain barrier",
                "Indication if the model predicts cell-penetrating activity of peptides",
                "Indication if the model predicts chemotactic activity of peptides",
                "Indication if the model predicts neuropeptides",
                "Indication if the model predicts quorum sensing activity of peptides",
                "Indication if the model predicts surface-binding activity of peptides",
                "Indication if the model predicts toxic activity of peptides")

headerCallback <- c(
  "function(thead, data, start, end, display){",
  "  var ncols = data[0].length;",
  sprintf("  var shortnames = [%s]", 
          paste0(paste0("'",colnames(dat),"'"), collapse = ",")),
  sprintf("  var tooltips = [%s];", 
          paste0(paste0("'", hover_text,"'"), collapse = ",")),
  "  for(var i=0; i<ncols; i++){",
  "    $('th:eq('+i+')',thead).attr('title', tooltips[i]).text(shortnames[i]);",
  "  }",
  "}"
)

```

## {.tabset}

### Software information

```{r}
datatable(dat, extensions = c('Buttons', 'FixedColumns'), 
          filter = "top", style = "bootstrap",
          rownames = FALSE, escape = FALSE,
          options = list(dom = "Brtilp", pageLength = 25,
                         buttons = c("copy", "csv", "excel", "print"),
                         autoWidth = TRUE,
                         # scrollX=TRUE,
                         # columnDefs = list(list(width = '200px', targets = c(0))),
                         fixedColumns = list(leftColumns = 1),
                         filter = list(clear = FALSE, plain = TRUE),
                         lengthMenu = list(25, 50, 75, 100, 125, 150),
                         headerCallback = JS(headerCallback))) %>%  
  formatStyle(c("Web server activity", "Web server functionality", "Antiangiogenic", "Antibacterial", "Antibiofilm", "Anticancer",
                "Antifungal", "Antihypertensive", "Antiinflammatory", "Antimicrobial", "Antiparasitic",
                "Antiviral", "Blood-brain barrier", "Cell-penetrating", "Chemotactic",
                "Neuropeptides", "Quorum sensing", "Surface-binding", "Toxic"),
              backgroundColor = styleEqual(c(FALSE, TRUE), c('#ededed', '#d6edff')))  %>%
  formatStyle(c("Web server", "Model repository", "Training repository"),
              backgroundColor = styleEqual("false", '#ededed', default = '#d6edff')) 
```

### Data collection & curation

To collect software for the prediction of peptide activities, we searched PubMed, Google Scholar and BioRxiv databases using queries such as "antimicrobial peptide prediction", "anticancer peptide prediction", etc. We focused on the search results that described software or reviewed/compared available tools for the prediction of a given activity. We included articles published until 1st July 2022. 

We manually curated all information for software featured in a 'Software information' tab. To do that we carefully analysed publications/pre-prints describing given software looking for the following information: 

- peptide activities predicted by a model, 
- link to the web server (**Web server** column), 
- link to the model, i.e. a repository with a trained model which can be used for prediction or an address of the model implemented as standalone software (**Model repository** column),
- link to the repository with all the code and data necessary to train/retrain the model (**Training repository** column).

Then, we checked if the links to the web servers provided in the articles were still working and if they function correctly, i.e. provide understandable output after running prediction. This information is indicated in the **Web server activity** and **Web server functionality** columns, respectively. We also inspected available code to determine the reproducibility standard (as described in [Heil et al.](https://doi.org/10.1038/s41592-021-01256-7) and indicated in the **Reproducibility standard** column). We are additionally using the category *below bronze*, when a model does not fulfill criteria  even for the bronze category.



